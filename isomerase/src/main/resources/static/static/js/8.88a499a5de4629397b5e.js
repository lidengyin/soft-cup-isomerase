webpackJsonp([8],{CyIF:function(e,t){},FbIA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),s=n.n(a),m=n("exGp"),o=n.n(m),i=n("Dd8w"),c=n.n(i),r=n("D2Ra"),l=n("mtWM"),u=n.n(l),f=n("NYxO"),p={name:"",data:function(){return{file:{},courseId:"",pathUrl:"",courseUrl:"",pageSize:10,pageNum:1,commentform:{commentName:"",commentContent:""},comments:[]}},methods:c()({},Object(f.b)(["choiceMenuId","choiceTypeMenuId"]),{handleCurrentChange:function(e){this.pageNum=e,this.reqFile(!0)},getData:function(e){var t=this;u.a.get(e,{responseType:"blob"}).then(function(e){var n=new Blob([e.data],{type:"application/vnd.ms-excel"}),a=URL.createObjectURL(n);t.pathUrl="../../../../../static/pdf/web/viewer.html?file="+a}).catch(function(e){console.log(e)})},reqFile:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o()(s.a.mark(function n(){var a,m,o,i,c,l,u,f;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.courseId,m=e.pageNum,o=e.pageSize,!(a&&m&&o)){n.next=6;break}return n.next=4,Object(r.a)({courseId:a,pageNum:m,pageSize:o});case 4:(i=n.sent)&&0===i.status&&(c=i.data,l=c.courseUrl,u=c.commentListVO,f=c.coursePdfUrl,t||(e.file=i.data,e.courseUrl=l,e.pathUrl="../../../../../static/pdf/web/viewer.html?file="+encodeURIComponent(f)),e.comments=u);case 6:case"end":return n.stop()}},n,e)}))()},uploadComment:function(){var e=this;return o()(s.a.mark(function t(){var n,a,m,o,i,c,l;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.courseId,a=e.commentform,m=a.commentName,o=a.commentContent,!(m.trim()&&o.trim()&&n)){t.next=10;break}return i=n,t.next=6,Object(r.e)({commentName:m,commentContent:o,typeId:i});case 6:(c=t.sent)&&0===c.status&&(e.commentform.commentName="",e.commentform.commentContent="",l="发表成功，等待审核",e.message(l,"success",1500)),t.next=11;break;case 10:e.message("请输入完整信息","warning",1500);case 11:case"end":return t.stop()}},t,e)}))()},message:function(e,t,n){this.$message({message:e,type:t,duration:n})}}),mounted:function(){this.$route.query.courseId?(this.courseId=this.$route.query.courseId,this.choiceMenuId("Files"),this.choiceTypeMenuId("Files"),this.reqFile()):this.$router.replace({name:"Files"})}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rightContent"},[n("div",{staticClass:"navTile"},[e._v("\n    当前位置：\n    "),n("router-link",{attrs:{to:{name:"Main"}}},[e._v("首页")]),e._v("\n     >> \n    "),n("router-link",{attrs:{to:{name:"Resource"}}},[e._v("教学资源")]),e._v("\n     >> \n    "),n("router-link",{attrs:{to:{name:"Files"}}},[e._v("教学课件")])],1),e._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"myDetail"},[n("div",{staticClass:"fileTitle"},[n("p",{staticClass:"fileP"},[e._v(e._s(e.file.courseName))]),e._v(" "),n("div",{staticClass:"fileSpanDiv"},[n("span",{staticClass:"fileSpan"},[e._v("\n              "+e._s(e.file.courseTime)+"\n            ")]),e._v(" "),n("span",{staticClass:"fileSpan"},[e._v("\n              "+e._s(e.file.viewTimes)+"人浏览\n            ")])])]),e._v(" "),n("div",{staticClass:"fileDiv"},[n("iframe",{attrs:{src:e.pathUrl,width:"100%"}})]),e._v(" "),n("div",{staticClass:"fileComment"},[n("div",{staticClass:"fileCommentItem"},[n("div",{staticClass:"fileCommentTitle"},[e._v("\n            我要评论：\n          ")]),e._v(" "),n("div",{staticClass:"fileCommentForm"},[n("el-form",{ref:"form",attrs:{model:e.commentform,"label-width":"60px"}},[n("el-form-item",{attrs:{label:"姓名："}},[n("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.commentform.commentName,callback:function(t){e.$set(e.commentform,"commentName",t)},expression:"commentform.commentName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"内容："}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},maxlength:"100","show-word-limit":""},model:{value:e.commentform.commentContent,callback:function(t){e.$set(e.commentform,"commentContent",t)},expression:"commentform.commentContent"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.uploadComment}},[e._v("发表评论")])],1)],1)],1)]),e._v(" "),n("div",{staticClass:"fileCommentItem"},[n("div",{staticClass:"fileCommentTitle"},[e._v("\n            评论列表：\n          ")]),e._v(" "),e.comments.commentVOS&&e.comments.commentVOS.length>0?n("div",{staticClass:"fileComments"},[e._l(e.comments.commentVOS,function(t,a){return n("ul",{key:a,staticClass:"commentUl"},[n("li",{staticClass:"commenterInfo"},[n("span",{staticClass:"commenterName"},[e._v(e._s(t.commentName)+"：")]),e._v(" "),n("span",{staticClass:"commenterTime"},[e._v(e._s(t.commentTime))])]),e._v(" "),n("li",{staticClass:"comment"},[e._v("\n                "+e._s(t.commentContent)+"\n              ")])])}),e._v(" "),n("div",{staticClass:"page"},[n("el-pagination",{attrs:{"current-page":e.pageNum,"page-size":e.pageSize,"hide-on-single-page":e.comments.pages<2,layout:"total, prev, pager, next",total:e.comments.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t}}})],1)],2):n("div",{staticClass:"fileComments emptyComment"},[e._v("\n            快来抢沙发\n          ")])])])])])])},staticRenderFns:[]};var d=n("VU/8")(p,v,!1,function(e){n("CyIF")},null,null);t.default=d.exports}});
//# sourceMappingURL=8.88a499a5de4629397b5e.js.map